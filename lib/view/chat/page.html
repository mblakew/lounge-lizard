<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<script src="https://kit.fontawesome.com/2a3723e597.js" crossorigin="anonymous"></script>


<style type="text/css">

  html, body {
    max-width: 100%;
    overflow-x: hidden;
  }
  body {
    margin: 0;
    color: #2c2d30;
    font-size: 15px;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    line-height: 1.46668;
    word-wrap: break-word;
    -webkit-font-smoothing: antialiased;
  }

  a, a:link, a:visited {
    color: #0576b9;
    text-decoration: none;
  }
  a:hover {
    text-decoration: underline;
  }

  #messages {
    margin-bottom: 10px;
  }

  .daymarker {
    width: 100%;
    height: 56px;
    margin-bottom: -5px;
  }
  .daymarker .label-wrapper {
    text-align: center;
  }
  .daymarker .label {
    display: inline-block;
    font-size: 14px;
    font-weight: bold;
    line-height: 16px;
    padding: 20px 12px 0 12px;
    background: white;
  }
  .daymarker hr {
    border: 0;
    border-top: 1px solid #e8e8e8;
    margin-top: -10px;
  }

  #unread-marker {
    width: 100%;
    height: 22px;
  }
  #unread-marker .label-wrapper {
    text-align: center;
  }
  #unread-marker .label {
    display: inline-block;
    font-size: 12px;
    font-weight: bold;
    padding: 0 12px 0 12px;
    color: #D72B3F;
    background: white;
  }
  #unread-marker hr {
    border: 0;
    border-top: 1px solid #D72B3F;
    margin-top: -10px;
  }

  .emoji {
    display: inline-block;
    height: 1em;
    width: 1em;
    overflow: hidden;
    line-height: 18px;
    vertical-align: middle;
  }
  .apple.emoji {
    background-image: url(https://a.slack-edge.com/c00d19/img/emoji_2017_12_06/sheet_apple_64_indexed_256.png);
    background-size: 5200% 5200%;
  }
  .custom.emoji {
    background-size: contain;
    background-repeat: no-repeat;
    background-position: 50% 50%;
  }
  .size-22.emoji {
    font-size: 22px;
    margin-top: -4px;
  }
  .size-16.emoji {
    font-size: 16px;
    margin-top: -3px;
  }

  .action-menu {
    display: none;
    position: absolute;
    right: 20px;
    background: white;
    border: 1px solid #E8E8E8;
    border-radius: 6px;
    user-select: none;
  }
  .action-menu a {
    color: #717274;
    padding: 0 5px;
    display: inline-block;
    text-decoration: none;
    border-right: 1px solid #E8E8E8;
  }
  .action-menu a:last-child {
    border: none;
  }
  .action-menu a:hover {
    color: #0576B9;
  }
  .starred .action-menu a.toggle-star {
    color: #FC0;
  }

  .msg {
    border-top: 6px solid transparent;
    display: table;
    width: 100%;
    border-collapse: collapse;
  }
  .msg .action-menu {
    margin-top: -.75em;
  }
  .msg.folded {
    border-top-width: 0;
  }
  .msg.folded .action-menu {
    margin-top: -1.3em;
  }
  .msg:hover {
    background-color: #F9F9F9;
  }
  .msg:hover .action-menu {
    display: block;
    float: right;
  }
  .msg.starred {
    background-color: rgba(255, 204, 0, .1);
  }
  .msg > div {
    display: table-cell;
    vertical-align: top;
  }
  .msg > .content {
    padding-right: 10px;
    word-wrap: break-word;
  }
  .msg > .avatar {
    padding-left: 10px;
  }
  .msg .avatar {
    width: 36px;
  }
  .msg .avatar > * {
    margin-right: 10px;
    border-radius: 3px;
  }
  .msg .avatar .dummy {
    width: 36px;
  }
  .msg .sender {
    height: 15px;
    line-height: 1;
    margin-bottom: 2px;
  }
  .msg .sender > div {
    display: inline-block;
  }
  .msg .sender .name {
    font-weight: 900;
  }
  .msg .sender .time {
    font-size: 12px;
    color: #717274;
  }
  .msg .sender .emoji {
    margin-top: -4px;
  }

  .text .para-br {
    display: block;
    height: 8px;
  }
  .text .edited-label {
    color: #A0A0A2;
    font-size: 13px;
    white-space: nowrap;
  }
  .text .at {
    color: #0576b9;
    text-decoration: none;
  }
  .text .at, .text .broadcast {
    padding: 0 2px 1px 2px;
    border-radius: 3px;
  }
  .text .at {
    background: #EAF5FC;
  }
  .text .broadcast {
    background: #FFF6D1;
    font-weight: 700;
  }
  .text .broadcast.at {
    font-weight: normal;
  }
  .text pre, .text code {
    font-family: Monaco, Menlo, Consolas, "Courier New", monospace;
    tab-size: 2;
    word-break: break-word;
    word-wrap: break-word;
  }
  .text pre {
    padding: .5rem;
    margin: .5rem 0 .2rem;
    font-size: .75rem;
    line-height: 1.15rem;
    white-space: pre-wrap;
    background: #F9F9F9;
    color: #333;
    border: 1px solid rgba(0, 0, 0, .15);
    border-radius: 4px;
    -webkit-border-radius: 4px;
  }
  .text code {
    font-size: .75rem;
    line-height: .75rem;
    white-space: normal;
    padding: 2px 3px 1px;
    color: #d72b3f;
    background: #F7F7F9;
    border: 1px solid #E1E1E8;
    border-radius: 3px;
    -webkit-border-radius: 3px;
  }

  .attachment {
    margin: 4px 0 4px 0;
    display: table;
    border-collapse: collapse;
  }
  .attachment > div {
    display: table-cell;
    vertical-align: top;
  }
  .attachment .border {
    border-radius: 8px;
  }
  .attachment .content {
    padding-left: 10px;
  }
  .attachment .sender {
    margin: 4px 0 4px 0;
  }
  .attachment .sender > * {
    vertical-align: middle;
  }
  .attachment .sender img {
    border-radius: 2px;
  }
  .attachment .sender a {
    color: #717274;
  }
  .attachment .title {
    color: #005E99;
    font-weight: bold;
  }

  .image img {
    margin-top: 4px;
    border-radius: 4px;
    border: 1px solid #AAA;
  }
  .image .name {
    margin-top: 4px;
    font-size: 12px;
    color: #717274;
  }

  .file {
    max-width: 600px;
    margin: 4px 0 4px 0;
    padding: 11px 0 10px 10px;
    border: 1px solid #E8E8E8;
    border-radius: 6px;
    background-color: white;
    cursor: pointer;
  }
  .file:hover {
    border-color: #2D9EE0;
  }
  .file .name {
    font-weight: bold;
    line-height: 1.15rem;
  }
  .file .type {
    font-size: 12px;
    color: #717274;
  }
  .file .icon {
    float: left;
    font-size: 32px;
    height: 100%;
    margin: -7px 8px 0 0;
    color: #2D9EE0;
  }

  .reactions {
    margin-bottom: 4px;
  }
  .reactions button {
    font-size: 11px;
    line-height: 16px;
    padding: 2px 3px;
    margin: 0;
    background: #FFF;
    border: 1px solid #E8E8E8;
    border-radius: 5px;
  }
  .reactions button.reacted {
    background-color: rgba(5, 118, 185, .05);
    border-color: rgba(5, 118, 185, .3);
  }
  .reactions button:hover {
    border-color: #2D9EE0;
    cursor: pointer;
  }
  .reactions .count {
    color: #717274;
    padding: 0 1px 0 3px;
  }

  .replies-wrapper {
    height: 32px;
    max-width: 600px;
    margin: 0 0 4px -4px;
    border: 1px solid transparent;
    border-radius: 6px;
    cursor: pointer;
  }
  .replies-wrapper:hover {
    border-color: rgba(0, 0, 0, .15);
  }
  .replies-wrapper .description {
    display: none;
    color: #717274;
  }
  .replies-wrapper:hover .description {
    display: inline;
  }
  .replies {
    margin: 4px 0 0 4px;
  }
  .replies img {
    border-radius: 3px;
  }
  .replies a, .replies .description {
    font-size: 12px;
    margin-left: 3px;
    vertical-align: 8px;
  }
  .replies a {
    font-weight: 700;
  }

  #chatFlex{
    display: flex;
    flex-direction: row;
    border: 1.5px solid black;
    justify-content: flex-end;
  }

  #chatbox{
    width: 100%;
    border: none;
  }

  #emojiButton{
    border: none;
    background-color: transparent;
    float: right;
  }

  .emojiKeyboard{
    display: none;
    transform-origin: bottom;
    transform: scaleY(0);
    transition: transform 200ms;

  }

  .keyboardAndInput{
    position:fixed;
    bottom: 0px;
    width: 100%;
  }

  #shift{
    transition: transform 500ms;
    transform: translateY(-30px);
  }

  .keyboardFlexParent{
    display: flex;
    flex-direction: column;
    background-color: #fbf9e5;
    max-height: 100px;
  }

  .tabs{
    background-color: #99cccc;
  }

  .emojiTab, .actualEmojiButton{
    border: none;
    background-color: transparent;
  }

  .actualEmojiButton{
    padding:1em;
  }

  .emojiContent{
    max-height: 100px;
    overflow: scroll;
  }

  .tabIcon{
    color: white;
  }

</style>
<style type="text/css">
  {{{fontStyle}}}
</style>
</head>
<body>

<div class = "gridParent">
  <div class= "gridChild"></div>
</div>

<div id = "shift">
  <div id="messages"> 
  {{#each messages}}
    {{> messagePartial messageList=../messageList message=this}}
  {{/each}}
  </div>
</div>

  <div class = "keyboardAndInput" id = "keyboardAndInput">
    <div id = "chatFlex">
      <input id = "chatbox" onkeydown = "onEnter()" type="text">
      <button id = "emojiButton" onclick = "window.toggleEmojis()">
        <i class="far fa-smile"></i>
      </button>
    </div>

    <div class = "emojiKeyboard" id = "emojis">
      <div class = "keyboardFlexParent">
        <div class = "tabs">
          <button class = "emojiTab" onclick="changeEmojiTabs(event, 'smileyEmojis')">
            <i class="far fa-smile tabIcon"></i>
          </button>
          <button class = "emojiTab" onclick="changeEmojiTabs(event, 'peopleEmojis')">
            <i class="fas fa-child tabIcon"></i>
          </button>
          <button class = "emojiTab" onclick="changeEmojiTabs(event, 'foodEmojis')">
            <i class="fas fa-hamburger tabIcon"></i>
          </button>
          <button class = "emojiTab" onclick="changeEmojiTabs(event, 'animalEmojis')">
            <i class="fas fa-dog tabIcon"></i>
          </button>
        </div>

        <div class = "emojiContent" id = "smileyEmojis"></div>
        <div class = "emojiContent" id = "peopleEmojis"></div>
        <div class = "emojiContent" id = "foodEmojis"></div>
        <div class = "emojiContent" id = "animalEmojis"></div>
        
      </div>
      
    </div>

  </div>

   
<script type="text/javascript" charset="utf-8">

  var peopleOnce = false;
  var animalOnce = false;
  var foodOnce = false;

  const smileyEmojis = ["ğŸ˜€", "ğŸ˜ƒ", "ğŸ˜„", "ğŸ˜", "ğŸ˜…", "ğŸ¤£", "ğŸ˜‚", "ğŸ™‚", "ğŸ™ƒ", "ğŸ˜‰", "ğŸ˜Š", "ğŸ˜‡", 
  "ğŸ˜˜", "ğŸ˜€", "ğŸ˜€", "ğŸ¤”", "ğŸ˜€", "ğŸ˜", "ğŸ˜‘", "ğŸ˜¶", "ğŸ™„", "ğŸ˜", "ğŸ˜£", "ğŸ˜¥","ğŸ˜®", "ğŸ¤", "ğŸ˜¯", "ğŸ˜ª",
   "ğŸ˜«", "ğŸ˜´", "ğŸ˜Œ", "ğŸ˜›", "ğŸ˜œ", "ğŸ˜", "ğŸ¤¤", "ğŸ˜’", "ğŸ˜“", "ğŸ˜”", "ğŸ˜•", "ğŸ™ƒ", "ğŸ¤‘", "ğŸ˜²", "â˜¹ï¸", "ğŸ™", "ğŸ˜–", "ğŸ˜", "ğŸ˜Ÿ", "ğŸ˜¤", "ğŸ˜¢", "ğŸ˜­", "ğŸ˜¦", "ğŸ˜§", "ğŸ˜¨", "ğŸ˜©", "ğŸ˜¬", "ğŸ˜°", "ğŸ˜±", "ğŸ˜³", "ğŸ˜µ", "ğŸ˜¡", "ğŸ˜ ", "ğŸ˜·", "ğŸ¤’", "ğŸ¤•", "ğŸ¤¢", "ğŸ¤§", "ğŸ˜‡", "ğŸ¤ ", "ğŸ¤¡", "ğŸ¤¥", "ğŸ¤“", "ğŸ˜ˆ", "ğŸ‘¿", "ğŸ‘¹", "ğŸ‘º", "ğŸ’€", "ğŸ‘»", "ğŸ‘½", "ğŸ¤–", "ğŸ’©", "ğŸ˜º", "ğŸ˜¸", "ğŸ˜¹", "ğŸ˜»", "ğŸ˜¼", "ğŸ˜½", "ğŸ™€", "ğŸ˜¿", "ğŸ˜¾"]

  const peopleEmojis = [ "ğŸ‘¶", "ğŸ‘§", "ğŸ‘¦", "ğŸ‘©", "ğŸ‘¨",  "ğŸ‘µ", "ğŸ‘´", "ğŸ‘²", "ğŸ‘³â€",
   "ğŸ‘³â€", "ğŸ‘±â€", "ğŸ‘±â€", "ğŸ’‚â€", "ğŸ’‚â€", "ğŸ•µï¸â€", "ğŸ•µï¸â€", "ğŸ‘©â€âš•ï¸", "ğŸ‘¨â€âš•ï¸", "ğŸ‘©â€ğŸŒ¾", "ğŸ‘¨â€ğŸŒ¾", "ğŸ‘©â€ğŸ³", "ğŸ‘¨â€ğŸ³" ,"ğŸ‘©â€ğŸ“"]

   const foodEmojis = ["ğŸ", "ğŸ", "ğŸ", "ğŸŠ", "ğŸ‹", "ğŸŒ", "ğŸ‰", "ğŸ‡", "ğŸ“", "ğŸˆ", "ğŸ’","ğŸ‘", "ğŸ",  "ğŸ¥", "ğŸ…", "ğŸ†", "ğŸ¥‘", "ğŸ¥’", "ğŸŒ¶", "ğŸŒ½", "ğŸ¥•", "ğŸ¥”", "ğŸ ", "ğŸ¥", "ğŸ", "ğŸ¥–", "ğŸ§€", "ğŸ¥š", "ğŸ³", "ğŸ¥", "ğŸ¥“", "ğŸ—", "ğŸ–", "ğŸŒ­", "ğŸ”", "ğŸŸ", "ğŸ•" , "ğŸ¥™", "ğŸŒ®", "ğŸŒ¯", "ğŸ¥—", "ğŸ¥˜", "ğŸ", "ğŸœ", "ğŸ²", "ğŸ›", "ğŸ£", "ğŸ±", "ğŸ¤", "ğŸ™", "ğŸš", "ğŸ˜", "ğŸ¥", "ğŸ¢", "ğŸ¡", "ğŸ§", "ğŸ¨", "ğŸ¦", "ğŸ°", "ğŸ‚", "ğŸ®", "ğŸ­", "ğŸ¬", "ğŸ«", "ğŸ¿", "ğŸ©", "ğŸª", "ğŸŒ°", "ğŸ¥œ", "ğŸ¯", "ğŸ¥›", "ğŸ¼", "â˜•ï¸", "ğŸµ", "ğŸ¶", "ğŸº", "ğŸ»", "ğŸ¥‚", "ğŸ·", "ğŸ¥ƒ", "ğŸ¸", "ğŸ¹", "ğŸ¾", "ğŸ¥„", "ğŸ´", "ğŸ½"]

   const animalEmojis = ["ğŸ¶", "ğŸ±", "ğŸ­", "ğŸ¹", "ğŸ°", "ğŸ¦Š" , "ğŸ»", "ğŸ¼", 
   "ğŸ¨", "ğŸ¯", "ğŸ¦", "ğŸ®", "ğŸ·", "ğŸ½", "ğŸ¸", "ğŸµ", "ğŸ™ˆ" ,"ğŸ™‰", "ğŸ™Š", "ğŸ’", "ğŸ”", "ğŸ§", "ğŸ¦", "ğŸ¤", "ğŸ£", "ğŸ¥", "ğŸ¦†", "ğŸ¦…", "ğŸ¦‰", "ğŸ¦‡", "ğŸº", "ğŸ—", "ğŸ´", "ğŸ¦„", "ğŸ", "ğŸ›", "ğŸ¦‹", "ğŸŒ" ,"ğŸš", "ğŸ", "ğŸœ", "ğŸ•·", "ğŸ•¸", "ğŸ¦‚", "ğŸ¢", "ğŸ", "ğŸ¦", "ğŸ™", "ğŸ¦‘", "ğŸ¦", "ğŸ¦€", "ğŸ¡", "ğŸ ", "ğŸŸ", "ğŸ¬", "ğŸ³", "ğŸ‹", "ğŸ¦ˆ", "ğŸŠ", "ğŸ…", "ğŸ†", "ğŸ¦", "ğŸ˜", "ğŸ¦", "ğŸª", "ğŸ«", "ğŸƒ", "ğŸ‚", "ğŸ„", "ğŸ", "ğŸ–", "ğŸ", "ğŸ‘", "ğŸ", "ğŸ¦Œ", "ğŸ•", "ğŸ©", "ğŸˆ", "ğŸ“", "ğŸ¦ƒ", "ğŸ•Š", "ğŸ‡", "ğŸ","ğŸ€", "ğŸ¿", "ğŸ¾", "ğŸ‰", "ğŸ²"]




  window.onload = function createEmojis(){
    for(var i = 0; i < smileyEmojis.length; i++){
    document.getElementById("smileyEmojis").innerHTML += "<button class = 'actualEmojiButton' value = '"+ smileyEmojis[i] + "' onclick = 'insertEmoji(this.value)'>" + smileyEmojis[i] + "</button>"
    }
  }

  function changeEmojiTabs(event, emojiType){

    if(emojiType == "peopleEmojis" && !peopleOnce){
      peopleOnce = true
      createPeopleEmojis()
    }

    if(emojiType == "animalEmojis" && !animalOnce){
      animalOnce = true
      createAnimalEmojis()
    }

    if(emojiType == "foodEmojis" && !foodOnce){
      foodOnce = true
      createFoodEmojis()
    }



    var content = document.getElementsByClassName("emojiContent")

    for(var i = 0; i < content.length;i++){
      content[i].style.display = "none"
    }
    document.getElementById(emojiType).style.display = "block"
  }

  function createPeopleEmojis(){
     for(var i = 0; i < peopleEmojis.length; i++){
      document.getElementById("peopleEmojis").innerHTML += "<button class = 'actualEmojiButton' value = '"+ peopleEmojis[i] + "' onclick = 'insertEmoji(this.value)'>" + peopleEmojis[i] + "</button>"
    }
  }

  function createFoodEmojis(){
     for(var i = 0; i < foodEmojis.length; i++){
      document.getElementById("foodEmojis").innerHTML += "<button class = 'actualEmojiButton' value = '"+ foodEmojis[i] + "' onclick = 'insertEmoji(this.value)'>" + foodEmojis[i] + "</button>"
    }
  }

  function createAnimalEmojis(){
     for(var i = 0; i < animalEmojis.length; i++){
      document.getElementById("animalEmojis").innerHTML += "<button class = 'actualEmojiButton' value = '"+ animalEmojis[i] + "' onclick = 'insertEmoji(this.value)'>" + animalEmojis[i] + "</button>"
    }
  }

  function onEnter(){
    if(event.key === 'Enter'){
      var message = document.getElementById("chatbox").value
      wey.handleEnter(message)
      document.getElementById("chatbox").value = ""
    }
  }

  function insertEmoji(emoji){
    document.getElementById("chatbox").value = document.getElementById("chatbox").value + emoji
  }

  // Which element is on top.
  var topElement = null
  // Scroll to the unread marker, or bottom if not found.
  function scrollToUnreadMarker() {
    var marker = document.getElementById('unread-marker')
    if (marker) {
      var rect = marker.getBoundingClientRect()
      window.scrollTo(0, rect.top + window.pageYOffset - (window.innerHeight / 2))
    } else {
      window.scrollTo(0, document.body.scrollHeight)
    }
  }
  // For IE we need to scroll after ready, as the window body's size may be
  // incorrect before showing the browser.
  // For morden browsers scrolling before showing has the best visual effect.
  var isIE = /Trident|MSIE/.test(navigator.userAgent)
  if (!isIE)
    scrollToUnreadMarker()
  // Helper to pass callbacks to UI.
  var callbacks = {}
  var nextCallbackId = 0
  window.executeCallback = function(id, arg) {
    if (!callbacks[id])
      return
    callbacks[id](arg)
    delete callbacks[id]
  }
  // Helper to dynamically load an image which requires authorization.
  function loadImage(element, url) {
    callbacks[++nextCallbackId] = function(result) {
      element.src = result
    }
    wey.fetch(url, nextCallbackId)
  }
  // Load all images.
  function loadAllImages() {
    var imgs = [].slice.call(document.getElementsByClassName('delayed-image'))
    for (var i = 0; i < imgs.length; ++i) {
      var img = imgs[i]
      img.classList.remove('delayed-image')
      loadImage(img, img.getAttribute('data-url'))
    }
  }
  loadAllImages()
  // Helper to convert HTML to DOM.
  function HTMLToDOM(html) {
    // Note: Don't use DOMParser, it has problems with applying CSS styles.
    var wrapper = document.createElement('div')
    wrapper.innerHTML = html
    return wrapper.childNodes
  }
  // External API to add a new message.
  var messages = document.getElementById('messages')
  window.addMessage = function(html, firstUnread, fromCurrentUser) {
    if (firstUnread) {
      var marker = document.getElementById('unread-marker')
      if (marker)
        messages.removeChild(marker)
    }
    var children = HTMLToDOM(html)
    for (var i = 0; i < children.length; i++)
      messages.appendChild(children[i])
    // Scroll to bottom when it is the first unread message or when the channel
    // is focused.
    if (fromCurrentUser || ((firstUnread || document.hasFocus()) && !topElement))
      window.scrollTo(0, document.body.scrollHeight)
    // Load images.
    loadAllImages()
  }
  // Helper to convert message id to DOM id.
  function normalizeId(id) {
    return 'msg' + id.replace('.', '_')
  }
  // External API to delete message.
  window.deleteMessage = function(id) {
    messages.removeChild(document.getElementById(normalizeId(id)))
  }
  // Helper to scroll to previous top element.
  var scrollOffset = 0
  var ignoreNextScroll = false
  function scrollToPreivousTopElement() {
    ignoreNextScroll = true
    if (topElement)
      window.scrollTo(0, topElement.getBoundingClientRect().top + window.pageYOffset - scrollOffset)
    else
      window.scrollTo(0, document.body.scrollHeight)
  }
  // External API to modify message.
  window.modifyMessage = function(id, html) {
    var msg = document.getElementById(normalizeId(id))
    if (msg) {
      // Ignore dayMarker and unreadMarker, only find the message part.
      var newMsg
      var element = HTMLToDOM(html)
      for (var i = 0; i < element.length; i++) {
        newMsg = element[i]
        if (newMsg.classList && newMsg.classList.contains('msg'))
          break
      }
      msg.classList = newMsg.classList
      msg.innerHTML = newMsg.innerHTML
      scrollToPreivousTopElement()
    }
  }
  // Helper function to find parent element.
  function findParent(tagName, target) {
    var loops = 0
    while (target && ++loops < 4) {
      if (target.tagName && target.tagName.toLowerCase() === tagName)
        return target
      target = target.parentNode
    }
    return null
  }
  // Open links in actual browsers.
  window.onclick = function(event) {
    var target = findParent('a', event.target)
    if (target && target.href !== '#' && !target.onclick) {
      wey.openLink(target.href)
      return false
    }
  }
  // Custom menu for links.
  window.oncontextmenu = function(event) {
    var target = findParent('a', event.target)
    if (target && target.href !== '#' && !target.oncontextmenu) {
      wey.openLinkContextMenu(target.href)
      return false
    }
  }
  // Update current top element.
  window.onscroll = function() {
    if (ignoreNextScroll) {
      ignoreNextScroll = false
      return
    }
    topElement = null
    scrollOffset = 0
    if (window.scrollY + window.innerHeight >= document.body.scrollHeight) {
      // Mark we want to be notified immediately when new message arrives.
      wey.notifyDisplaying()
      return
    }
    var messages = document.getElementsByClassName('msg')
    if (messages.length === 0)
      return
    // Search backwards.
    for (var i = messages.length - 1; i >= 0;  --i) {
      var rect = messages[i].getBoundingClientRect()
      if (rect.top < 0)
        break
      topElement = messages[i]
      scrollOffset = rect.top
    }
    // When navigating old messages, treat the page as unfocused.
    wey.notifyNotDisplaying()
  }

  window.toggleEmojis = function(){
    var emojis = document.getElementById('emojis')
    var shiftDiv = document.getElementById('shift')
    var keyboardAndInput = document.getElementById('keyboardAndInput')
    var setEmojiHeight = document.getElementsByClassName('emojiContent')
    var setEmojiHeightParent = document.getElementsByClassName('keyboardFlexParent')

    var isVisible = false;

    if(emojis.style.display == "block"){
      isVisible = false;
      emojis.style.display = "none"
      emojis.style.transform = "scaleY(0)"
      // emojis.style.visibility = "hidden"
      shiftDiv.style.transform = "translateY(-30px)"
    }
    else{
      isVisible = true;
      emojis.style.display = "block"
      emojis.style.transform = "scaleY(1)"
      
      var shiftBy = keyboardAndInput.offsetHeight + "px"
      shiftDiv.style.transform = "translateY(-" + shiftBy + ")"
      // setEmojiHeight.style.maxHeight = shiftBy
      // setEmojiHeightParent.style.maxHeight = shiftBy
    }

  }

  window.getChatboxMessage = function(){
    var message = document.getElementById("chatbox").value
    wey.getChatbox(message)
  }
  // Make sure the view is always scrolled at current message.
  window.onresize = scrollToPreivousTopElement
  // We are ready.
  wey.ready()
  // See comment above on IE.
  if (isIE)
    scrollToUnreadMarker()
</script>

</body>
</html>
